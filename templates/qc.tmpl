{{ define "qc" }}
{{ template "header" }}
<h2>Sequencing QC</h2>

<p>Here are QC data from the sequencing for runs that have completed.</p>

{{ template "qc_table" . }}

<div>
    <h2>Charts</h2>
    <form hx-get="/qc/charts/global" hx-target="#chart-container" hx-trigger="change, keyup delay:300ms from:input[name=run_id], change from:select[name=platform]" hx-swap="innerHtml ignoreTitle:true" hx-include="#qc-table-form">
        <label for="chart-data-select">Chart type:</label>
        <select id="chart-data-select" name="chart-data">
            <option value="q30" selected>%&ge;Q30</option>
            <option value="error_rate">Error rate</option>
        </select>
        <label for="chart-type-select">Chart type:</label>
        <select id="chart-type-select" name="chart-type">
            <option value="bar" selected>Bar chart</option>
            <option value="line">Line chart</option>
        </select>
    </form>
    <div id="chart-container" hx-get="/qc/charts/global?&chart-data=q30&chart-type=bar" hx-trigger="load" hx-swap="innerHTML ignoreTitle:true">script">
        <p>Loading chart...</p>
    </div>
</div>
<script src="https://go-echarts.github.io/go-echarts-assets/assets/echarts.min.js"></script>
{{ template "footer" }}
{{ end }}
